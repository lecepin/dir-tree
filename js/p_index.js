"use strict";(self.webpackChunk_ice_lite_scaffold=self.webpackChunk_ice_lite_scaffold||[]).push([[767],{3119:function(e,n,t){t.r(n),t.d(n,{default:function(){return b},pageConfig:function(){return R}});var i=t(7568),r=t(253),l=t(2433),a=t(4820),c=t(5893),o=t(7294),u=t(9017),s=t(9501),d=t(9505),h=t(2072),Z=t(8898),m=t(5358),f=t(6224),p=t(6860),D=t(3295),g=t(6032),v=t(2651),F=t(2023);function b(){var e,n=(0,r.Z)((0,o.useState)(!1),2),t=n[0],u=n[1],b=(0,r.Z)((0,o.useState)(null),2),R=b[0],w=b[1],C=(0,r.Z)((0,o.useState)(!1),2),I=C[0],k=C[1],y=(0,r.Z)((0,o.useState)({deep:3,iconDir:"\uD83D\uDCC1",iconFile:"\uD83D\uDCC4",showIcon:!0,hideDotFile:!1,hideDotDir:!1,hideFileReg:"",hideDirReg:"node_modules|.git|build",hideDirRegSaveSelf:!0}),2),P=y[0],S=y[1],x=(0,r.Z)(s.Z.useForm(),1)[0],N=s.Z.useWatch("showIcon",x),E=(0,o.useMemo)(function(){return R?(P.showIcon?R.isFile?P.iconFile:P.iconDir:"")+R.name+"\r"+function e(n,t,i,r){return i>=t&&-1!==t?"":n.filter(function(e){if(e.isFile){if(P.hideDotFile&&e.name.startsWith(".")||P.hideFileReg&&RegExp(P.hideFileReg).test(e.name))return!1}else if(P.hideDotDir&&e.name.startsWith(".")||!P.hideDirRegSaveSelf&&P.hideDirReg&&RegExp(P.hideDirReg).test(e.name))return!1;return!0}).map(function(n,l,a){var c=P.showIcon?n.isFile?P.iconFile:P.iconDir:"",o=!n.isFile&&P.hideDirReg&&RegExp(P.hideDirReg).test(n.name);if(l===a.length-1){var u=o?"":e(n.children||[],t,i+1,r+" ".repeat(3));return"".concat(r,"\u2514\u2500 ").concat(c).concat(n.name,"\r").concat(u)}var s=o?"":e(n.children||[],t,i+1,r+"\u2502"+" ".repeat(2));return"".concat(r,"\u251C\u2500 ").concat(c).concat(n.name,"\r").concat(s)}).join("")}(R.children||[],P.deep,0,""):""},[R,P]),_=(0,o.useMemo)(function(){return Date.now()},[E]);return(0,a.tZ)("div",{className:"app",children:(0,a.BX)(d.Z,{spinning:I,tip:"\u8BFB\u53D6\u4E2D",size:"large",children:[(0,a.tZ)("div",{className:"drop-box",onDragOver:function(e){return e.preventDefault()},onDragEnter:function(e){e.preventDefault(),e.target.classList.add("drop-box-enter")},onDragLeave:function(e){e.preventDefault(),e.target.classList.remove("drop-box-enter")},onDrop:(e=(0,i.Z)(function(e){var n,t;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(e.preventDefault(),0==(n=e.dataTransfer.items).length)return[2];k(!0),console.time("scanFiles"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function e(n){if(!n)return Promise.reject("item is null");var t={name:n.name,isFile:n.isFile};return n.isDirectory?(t.children=[],new Promise(function(r){var a;n.createReader().readEntries((a=(0,i.Z)(function(n){return(0,l.Jh)(this,function(i){return[2,Promise.all(n.map(function(n){return e(n).then(function(e){return t.children.push(e)})})).then(function(){r(t)})]})}),function(e){return a.apply(this,arguments)}))})):new Promise(function(e,t){n.file(e,t)}).then(function(e){t.size=e.size}).then(function(){return t})}(n[0].webkitGetAsEntry())];case 2:return w.apply(void 0,[r.sent()]),[3,4];case 3:return t=r.sent(),h.ZP.error(t),[3,4];case 4:return k(!1),console.timeEnd("scanFiles"),[2]}})}),function(n){return e.apply(this,arguments)}),children:"\u8BF7\u5C06\u76EE\u5F55\u62D6\u62FD\u81F3\u6B64"}),(0,a.tZ)(Z.Z,{}),R?(0,a.tZ)(m.Z.TextArea,{className:"result",rows:10,placeholder:"",defaultValue:E},_):null,(0,a.BX)("div",{className:"bottom-btn",children:[R?(0,a.tZ)(f.ZP,{type:"primary",icon:(0,a.tZ)(v.Z,{}),size:"large",ghost:!0,onClick:function(){document.querySelector(".result").select(),document.execCommand("copy"),h.ZP.success("\u5DF2\u590D\u5236",1)},children:"\u590D\u5236"}):null,(0,a.tZ)(f.ZP,{type:"primary",icon:(0,a.tZ)(F.Z,{}),size:"large",ghost:!0,danger:!0,onClick:function(){return u(!0)},children:"\u8BBE\u7F6E"})]}),t?(0,a.tZ)(p.Z,{title:"\u8BBE\u7F6E",open:!0,onOk:(0,i.Z)(function(){return(0,l.Jh)(this,function(e){return x.validateFields().then(function(e){S(e),u(!1)}),[2]})}),onCancel:function(){return u(!1)},width:600,children:(0,a.BX)(s.Z,{labelCol:{span:9},wrapperCol:{span:15},form:x,initialValues:P,children:[(0,a.tZ)(s.Z.Item,{name:"deep",label:"\u76EE\u5F55\u663E\u793A\u6DF1\u5EA6",rules:[{required:!0}],tooltip:"\u8BBE\u7F6E\u4E3A -1 \u65F6\u663E\u793A\u5168\u90E8",children:(0,a.tZ)(D.Z,{min:-1})}),(0,a.tZ)(s.Z.Item,{name:"showIcon",label:"\u663E\u73B0\u56FE\u6807",valuePropName:"checked",children:(0,a.tZ)(g.Z,{})}),N?(0,a.BX)(c.Fragment,{children:[(0,a.tZ)(s.Z.Item,{name:"iconDir",label:"\u76EE\u5F55\u56FE\u6807",rules:[{required:!0}],children:(0,a.tZ)(m.Z,{})}),(0,a.tZ)(s.Z.Item,{name:"iconFile",label:"\u6587\u4EF6\u56FE\u6807",rules:[{required:!0}],children:(0,a.tZ)(m.Z,{})})]}):null,(0,a.tZ)(s.Z.Item,{name:"hideDotFile",label:"\u9690\u85CF . \u5F00\u5934\u7684\u6587\u4EF6",valuePropName:"checked",children:(0,a.tZ)(g.Z,{})}),(0,a.tZ)(s.Z.Item,{name:"hideDotDir",label:"\u9690\u85CF . \u5F00\u5934\u7684\u76EE\u5F55",valuePropName:"checked",children:(0,a.tZ)(g.Z,{})}),(0,a.tZ)(s.Z.Item,{name:"hideFileReg",label:"\u6587\u4EF6\u9690\u85CF\u6B63\u5219",children:(0,a.tZ)(m.Z,{})}),(0,a.tZ)(s.Z.Item,{name:"hideDirReg",label:"\u76EE\u5F55\u9690\u85CF\u6B63\u5219",children:(0,a.tZ)(m.Z,{})}),(0,a.tZ)(s.Z.Item,{name:"hideDirRegSaveSelf",label:"\u4FDD\u7559\u9690\u85CF\u76EE\u5F55\u81EA\u8EAB",valuePropName:"checked",tooltip:"\u9690\u85CF\u76EE\u5F55\u6B63\u5219\u5339\u914D\u65F6\uFF0C\u662F\u5426\u8FD8\u4FDD\u7559\u81EA\u8EAB\u6B63\u5E38\u663E\u793A",children:(0,a.tZ)(g.Z,{})})]})}):null]})})}var R=(0,u.Cv)(function(){return{title:"Dir Tree"}})}}]);